{
    "title": "CumulusCI Project Configuration",
    "type": "object",
    "properties": {
        "tasks": {
            "title": "Tasks",
            "description": "A dictionary of tasks for the project.",
            "default": {},
            "examples": [
                {
                    "deploy": {
                        "class_path": "cumulusci.tasks.salesforce.Deploy",
                        "description": "Deploys the metadata in the project to the org.",
                        "group": "Deployment",
                        "options": {
                            "path": "src"
                        }
                    },
                    "load_custom_settings": {
                        "class_path": "cumulusci.tasks.salesforce.LoadCustomSettings",
                        "description": "Loads custom settings data into the org.",
                        "group": "Data",
                        "options": {
                            "path": "data/custom_settings"
                        }
                    }
                }
            ],
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/Task"
            }
        },
        "flows": {
            "title": "Flows",
            "description": "A dictionary of flows for the project.",
            "default": {},
            "examples": [
                {
                    "dependencies": {
                        "description": "Installs all dependencies for the project.",
                        "steps": {
                            "1": {
                                "task": "update_dependencies"
                            },
                            "2": {
                                "task": "install_prod"
                            }
                        }
                    },
                    "config_dev": {
                        "description": "Configures the org for development.",
                        "steps": {
                            "1": {
                                "flow": "config_common"
                            },
                            "2": {
                                "flow": "config_dev"
                            }
                        }
                    },
                    "dev_org": {
                        "description": "Sets up a new dev org.",
                        "steps": {
                            "1": {
                                "flow": "dependencies"
                            },
                            "2": {
                                "flow": "deploy_unmanaged"
                            },
                            "3": {
                                "flow": "config_dev"
                            }
                        }
                    }
                }
            ],
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/Flow"
            }
        },
        "project": {
            "title": "Project",
            "description": "The project configuration.",
            "default": {},
            "examples": [
                {
                    "name": "Nonprofit Success Pack",
                    "package": {
                        "name": "Nonprofit Success Pack",
                        "namespace": "npsp",
                        "api_version": "59.0"
                    },
                    "test": {
                        "name_match": "%Test"
                    },
                    "git": {
                        "repo_url": "https://github.com/SalesforceFoundation/NPSP",
                        "default_branch": "main",
                        "prefix_feature": "feature/",
                        "prefix_beta": "beta/",
                        "prefix_release": "release/",
                        "push_prefix_sandbox": "sandbox/",
                        "push_prefix_production": "prod/"
                    },
                    "dependencies": [
                        {
                            "namespace": "somens",
                            "version": "1.23"
                        },
                        {
                            "github": "https://github.com/SalesforceFoundation/Households"
                        }
                    ],
                    "dependency_resolutions": {
                        "production": "latest_release",
                        "preproduction": "include_beta",
                        "resolution_strategies": {
                            "latest_release": ["tag", "latest_release", "unmanaged"],
                            "include_beta": [
                                "tag",
                                "latest_beta",
                                "latest_release",
                                "unmanaged"
                            ]
                        }
                    }
                }
            ],
            "allOf": [
                {
                    "$ref": "#/definitions/Project"
                }
            ]
        },
        "orgs": {
            "title": "Orgs",
            "description": "A dictionary of org configurations for the project.",
            "default": {},
            "examples": [
                {
                    "scratch": {
                        "dev": {
                            "config_file": "orgs/dev.json",
                            "days": 1,
                            "namespaced": true,
                            "setup_flow": "dev_org",
                            "noancestors": true,
                            "release": "preview"
                        },
                        "qa": {
                            "config_file": "orgs/qa.json",
                            "days": 7,
                            "namespaced": true,
                            "setup_flow": "qa_org",
                            "noancestors": true,
                            "release": "previous"
                        }
                    }
                }
            ],
            "allOf": [
                {
                    "$ref": "#/definitions/Orgs"
                }
            ]
        },
        "services": {
            "title": "Services",
            "description": "A dictionary of services for the project.",
            "default": {},
            "examples": [
                {
                    "github": {
                        "description": "Create a connection to GitHub to interact with the API.",
                        "attributes": {
                            "username": {
                                "description": "The username for the service.",
                                "required": true,
                                "default_factory": "cumulusci.core.config.OrgConfig.default_username"
                            },
                            "password": {
                                "description": "The password for the service.",
                                "required": true,
                                "sensitive": true
                            }
                        },
                        "validator": "cumulusci.core.github.validate_service"
                    }
                }
            ],
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/Service"
            }
        },
        "cumulusci": {
            "title": "CumulusCI",
            "description": "The CumulusCI configuration.",
            "examples": [
                {
                    "keychain": "cumulusci.core.keychain.EnvironmentProjectKeychain"
                }
            ],
            "allOf": [
                {
                    "$ref": "#/definitions/CumulusCIConfig"
                }
            ]
        },
        "plans": {
            "title": "Plans",
            "description": "A dictionary of plans for the project.",
            "default": {},
            "examples": [
                {
                    "base_install": {
                        "title": "Base Install",
                        "description": "A base install of the packages only",
                        "tier": "primary",
                        "slug": "base-install",
                        "is_listed": true,
                        "steps": {
                            "1": {
                                "task": "update_dependencies"
                            },
                            "2": {
                                "task": "install_prod"
                            }
                        },
                        "checks": [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            },
                            {
                                "when": "'npsp' not in tasks.get_installed_packages()",
                                "action": "error",
                                "message": "NPSP must be installed in your org."
                            }
                        ],
                        "error_message": "The org must be a scratch org.",
                        "post_install_message": "The plan has been installed.",
                        "preflight_message": "The plan is about to be installed. We're running some checks on your org first.",
                        "allowed_org_providers": ["devhub", "user"]
                    },
                    "full_demo_install": {
                        "title": "Full Demo Install",
                        "description": "A full demo install of the packages with configuration and sample data",
                        "tier": "secondary",
                        "slug": "full-demo-install",
                        "is_listed": true,
                        "steps": {
                            "1": {
                                "task": "update_dependencies"
                            },
                            "2": {
                                "task": "install_prod"
                            },
                            "3": {
                                "flow": "config_common"
                            },
                            "4": {
                                "flow": "config_demo"
                            },
                            "5": {
                                "flow": "demo_data"
                            }
                        },
                        "checks": [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            },
                            {
                                "when": "'npsp' not in tasks.get_installed_packages()",
                                "action": "error",
                                "message": "NPSP must be installed in your org."
                            }
                        ],
                        "error_message": "The org must be a scratch org.",
                        "post_install_message": "The plan has been installed.",
                        "preflight_message": "The plan is about to be installed. We're running some checks on your org first.",
                        "allowed_org_providers": ["devhub", "user"]
                    },
                    "customer_org": {
                        "title": "Customer Org",
                        "description": "A customer org with the packages installed",
                        "tier": "additional",
                        "slug": "customer-org",
                        "is_listed": true,
                        "steps": {
                            "1": {
                                "flow": "customer_org"
                            }
                        },
                        "checks": [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            },
                            {
                                "when": "'npsp' not in tasks.get_installed_packages()",
                                "action": "error",
                                "message": "NPSP must be installed in your org."
                            }
                        ],
                        "error_message": "The org must be a scratch org.",
                        "post_install_message": "The plan has been installed.",
                        "preflight_message": "The plan is about to be installed. We're running some checks on your org first.",
                        "allowed_org_providers": ["devhub", "user"]
                    },
                    "customer_org_full": {
                        "title": "Customer Org Full",
                        "description": "A customer org with the packages installed and configured",
                        "tier": "additional",
                        "slug": "customer-org-full",
                        "is_listed": true,
                        "steps": {
                            "1": {
                                "task": "customer_org_full"
                            }
                        },
                        "checks": [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            },
                            {
                                "when": "'npsp' not in tasks.get_installed_packages()",
                                "action": "error",
                                "message": "NPSP must be installed in your org."
                            }
                        ],
                        "error_message": "The org must be a scratch org.",
                        "post_install_message": "The plan has been installed.",
                        "preflight_message": "The plan is about to be installed. We're running some checks on your org first.",
                        "allowed_org_providers": ["devhub", "user"]
                    }
                }
            ],
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/Plan"
            }
        },
        "minimum_cumulusci_version": {
            "title": "Minimum CumulusCI Version",
            "description": "The minimum version of CumulusCI required to run the project.",
            "examples": ["3.0.0"],
            "type": "string"
        },
        "sources": {
            "title": "Sources",
            "description": "A dictionary of sources for the project.",
            "default": {},
            "examples": [
                {
                    "npsp": {
                        "github": "https://github.com/SalesforceFoundation/NPSP",
                        "resolution_strategy": "latest_release"
                    },
                    "pmm": {
                        "github": "https://github.com/SalesforceFoundation/PMM",
                        "resolution_strategy": "latest_release"
                    }
                }
            ],
            "type": "object",
            "additionalProperties": {
                "anyOf": [
                    {
                        "$ref": "#/definitions/LocalFolderSourceModel"
                    },
                    {
                        "$ref": "#/definitions/GitHubSourceModel"
                    }
                ]
            }
        },
        "cli": {
            "title": "CumulusCI CLI",
            "description": "The CumulusCI CLI configuration.",
            "examples": [
                {
                    "show_stacktraces": false,
                    "plain_output": false
                }
            ],
            "allOf": [
                {
                    "$ref": "#/definitions/CumulusCLIConfig"
                }
            ]
        }
    },
    "additionalProperties": false,
    "definitions": {
        "StepUIOptions": {
            "title": "Task Definition",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Name",
                    "type": "string"
                },
                "is_required": {
                    "title": "Is Required",
                    "type": "boolean"
                },
                "is_recommended": {
                    "title": "Is Recommended",
                    "type": "boolean"
                },
                "is_optional": {
                    "title": "Is Optional",
                    "type": "boolean"
                }
            },
            "required": ["name", "is_required", "is_recommended", "is_optional"],
            "additionalProperties": false
        },
        "Task": {
            "title": "Task Definition",
            "type": "object",
            "properties": {
                "class_path": {
                    "title": "Class Path",
                    "description": "The Python class path to the task class. CumulusCI includes the repo root in the Python path, so you can use a relative path from the repo root.",
                    "examples": [
                        "cumulusci.tasks.salesforce.Deploy",
                        "tasks.my_task.MyTask"
                    ],
                    "type": "string"
                },
                "description": {
                    "title": "Description",
                    "description": "A description of the task shown via the cli in task list, task info, and when running the task directly or via a flow.",
                    "examples": ["Deploys the post-install metadata."],
                    "type": "string"
                },
                "group": {
                    "title": "Group",
                    "description": "The group of the task, used to group tasks in cci task list.",
                    "examples": ["Sample Data", "My Custom Group"],
                    "type": "string"
                },
                "options": {
                    "title": "Task Options",
                    "description": "Options for the task. Tasks in CumulusCI can accept specific options. Use cci task info to list available options for a particular task.",
                    "default": {},
                    "additionalProperties": true,
                    "examples": [
                        {
                            "path": "src"
                        }
                    ],
                    "type": "object"
                },
                "ui_options": {
                    "title": "UI Options",
                    "description": "Options for the task or flow that are only used by MetaDeploy. For flows, this should be a dictionary with a key for the task name containing keys for each option.",
                    "default": {},
                    "additionalProperties": true,
                    "examples": [
                        {
                            "name": "Deploy Recommended Config",
                            "is_recommended": true
                        },
                        {
                            "name": "Deploy Optional Config",
                            "is_optional": true
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/StepUIOptions"
                        }
                    ]
                },
                "name": {
                    "title": "Name",
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "PreflightCheckActionEnum": {
            "title": "PreflightCheckActionEnum",
            "description": "The allowed values for the action field of a preflight check",
            "enum": ["error", "warn", "optional", "skip"],
            "type": "string"
        },
        "PreflightCheck": {
            "title": "Preflight Check Definition",
            "type": "object",
            "properties": {
                "when": {
                    "title": "When Clause",
                    "description": "A Jinja expression used to determine if the preflight check triggers.",
                    "examples": [
                        "org.scratch == True",
                        "'npsp' not in tasks.get_installed_packages()"
                    ],
                    "type": "string"
                },
                "action": {
                    "title": "Action",
                    "description": "The action to take if the preflight check when clause evaluates to True.",
                    "examples": ["error", "warn", "optional", "skip"],
                    "allOf": [
                        {
                            "$ref": "#/definitions/PreflightCheckActionEnum"
                        }
                    ]
                },
                "message": {
                    "title": "Message",
                    "description": "The message to display if the preflight check evaluates to True.",
                    "examples": ["The org must be a scratch org."],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "Step": {
            "title": "Step Definition",
            "type": "object",
            "properties": {
                "task": {
                    "title": "Task",
                    "description": "The name of the task to run",
                    "examples": ["deploy", "load_custom_settings"],
                    "type": "string"
                },
                "flow": {
                    "title": "Flow",
                    "description": "The name of the flow to run",
                    "examples": ["dependencies", "config_dev"],
                    "type": "string"
                },
                "ignore_failure": {
                    "title": "Ignore Failure",
                    "description": "If True, ignore failures on this step and continues with the next step.",
                    "default": false,
                    "type": "boolean"
                },
                "when": {
                    "title": "When",
                    "description": "A Jinja expression to determine if the step should run",
                    "examples": [
                        "org.scratch == True",
                        "'npsp' not in tasks.get_installed_packages()"
                    ],
                    "type": "string"
                },
                "options": {
                    "title": "Options",
                    "description": "Options for the task or flow. For flows, this should be a dictionary with a key for the task name containing keys for each option.",
                    "default": {},
                    "additionalProperties": true,
                    "examples": [
                        {
                            "path": "src"
                        },
                        {
                            "deploy": {
                                "path": "src"
                            }
                        }
                    ],
                    "type": "object"
                },
                "ui_options": {
                    "title": "UI Options",
                    "description": "Options for the task or flow that are only used by MetaDeploy. For flows, this should be a dictionary with a key for the task name containing keys for each option.",
                    "default": {},
                    "additionalProperties": true,
                    "examples": [
                        {
                            "name": "Deploy Recommended Config",
                            "is_recommended": true
                        },
                        {
                            "name": "Deploy Optional Config",
                            "is_optional": true
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/StepUIOptions"
                        }
                    ]
                },
                "checks": {
                    "title": "Preflight Checks",
                    "description": "A list of preflight checks to run before the step.",
                    "default": [],
                    "examples": [
                        [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            }
                        ]
                    ],
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/PreflightCheck"
                    }
                },
                "description": {
                    "title": "Description",
                    "description": "A description of the step, shown in output logs when running the flow.",
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "Flow": {
            "title": "Flow Definition",
            "type": "object",
            "properties": {
                "description": {
                    "title": "Description",
                    "description": "A description of the flow shown via the cli in flow list, flow info, and when running the flow.",
                    "examples": ["Sets up a new dev org."],
                    "type": "string"
                },
                "steps": {
                    "title": "Steps",
                    "description": "The steps in the flow. Steps are entered in numbered slots using the key. Slot numbers are parsed with Python's LooseVersion to allow for injecting steps between other steps using the format 1.1.2.",
                    "examples": [
                        {
                            "1": {
                                "task": "deploy"
                            },
                            "1.1": {
                                "task": "my-custom-task"
                            },
                            "2": {
                                "task": "run_tests"
                            }
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/Step"
                    }
                },
                "group": {
                    "title": "Group",
                    "description": "The group of the flow. Used to group flows in cci flow list.",
                    "examples": ["Org Setup", "My Custom Group"],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "Package": {
            "title": "Package Configuration",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Package Name",
                    "description": "The name of the package in the packaging org or DevHub.",
                    "examples": ["Nonprofit Success Pack", "My Custom Package"],
                    "type": "string"
                },
                "name_managed": {
                    "title": "Managed Package Name Override",
                    "description": "If set, this will override the package name for deployments to the 1GP managed packages. Use if you need to have a different package name in the 1GP packaging org than in all other orgs.",
                    "examples": ["My Custom 1GP Package Name"],
                    "type": "string"
                },
                "namespace": {
                    "title": "Package Namespace",
                    "description": "The Salesforce assigned package namespace for the package.",
                    "examples": ["npsp", "mynamespace"],
                    "type": "string"
                },
                "install_class": {
                    "title": "Install Class",
                    "description": "The name of the Apex class to run during package install. This value is used when creating managed package versions.",
                    "examples": ["npsp.InstallScript"],
                    "type": "string"
                },
                "uninstall_class": {
                    "title": "Uninstall Class",
                    "description": "The name of the Apex class to run during package uninstall. This value is used when creating managed package versions.",
                    "examples": ["npsp.UninstallScript"],
                    "type": "string"
                },
                "api_version": {
                    "title": "API Version",
                    "description": "The API version to use when deploying and retrieving the project.",
                    "examples": ["50.0"],
                    "type": "string"
                },
                "metadata_package_id": {
                    "title": "Metadata Package ID",
                    "description": "The Metadata Package ID for 2GP packages.",
                    "examples": ["033000000000000AAA"],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "Test": {
            "title": "Apex Test Configuration",
            "type": "object",
            "properties": {
                "name_match": {
                    "title": "Apex Test Name Match",
                    "description": "A SOQL LIKE expression to match Apex test class names to run.",
                    "examples": ["%Test", "%_test%"],
                    "type": "string"
                }
            },
            "required": ["name_match"],
            "additionalProperties": false
        },
        "ReleaseNotesParser": {
            "title": "Release Notes Parsers Configuration",
            "type": "object",
            "properties": {
                "class_path": {
                    "title": "Class Path",
                    "description": "The Python path to the release notes parser class.",
                    "examples": ["cumulusci.core.release_notes.parsers.BaseParser"],
                    "type": "string"
                },
                "title": {
                    "title": "Title",
                    "description": "The title of the release notes parser.",
                    "examples": ["Base Release Notes Parser"],
                    "type": "string"
                }
            },
            "required": ["class_path", "title"],
            "additionalProperties": false
        },
        "ReleaseNotes": {
            "title": "Release Notes Configuration",
            "type": "object",
            "properties": {
                "parsers": {
                    "title": "Parsers",
                    "description": "A dictionary of release notes parsers in execution order.",
                    "default": {},
                    "examples": [
                        {
                            "1": {
                                "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                "title": "Critical Changes"
                            },
                            "2": {
                                "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                "title": "Changes"
                            },
                            "3": {
                                "class_path": "cumulusci.tasks.release_notes.parser.GithubIssuesParser",
                                "title": "Issues Closed"
                            },
                            "4": {
                                "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                "title": "New Metadata"
                            },
                            "5": {
                                "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                "title": "Deleted Metadata"
                            },
                            "6": {
                                "class_path": "cumulusci.tasks.release_notes.parser.InstallLinkParser",
                                "title": "Installation Info"
                            }
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/ReleaseNotesParser"
                    }
                }
            },
            "additionalProperties": false
        },
        "Git": {
            "title": "Git Configuration",
            "type": "object",
            "properties": {
                "repo_url": {
                    "title": "Repo URL",
                    "description": "The URL of the repo.",
                    "examples": ["https://github.com/SalesforceFoundation/NPSP"],
                    "type": "string"
                },
                "default_branch": {
                    "title": "Default Branch",
                    "description": "The default branch of the repo.",
                    "examples": ["main"],
                    "type": "string"
                },
                "prefix_feature": {
                    "title": "Feature Branch Prefix",
                    "description": "The prefix for feature branches.",
                    "examples": ["feature/"],
                    "type": "string"
                },
                "prefix_beta": {
                    "title": "Beta Branch Prefix",
                    "description": "The prefix for beta branches.",
                    "examples": ["beta/"],
                    "type": "string"
                },
                "prefix_release": {
                    "title": "Release Branch Prefix",
                    "description": "The prefix for release branches.",
                    "examples": ["release/"],
                    "type": "string"
                },
                "push_prefix_sandbox": {
                    "title": "Sandbox Push Prefix",
                    "description": "The prefix for sandbox push branches.",
                    "examples": ["sandbox/"],
                    "type": "string"
                },
                "push_prefix_production": {
                    "title": "Production Push Prefix",
                    "description": "The prefix for production push branches.",
                    "examples": ["prod/"],
                    "type": "string"
                },
                "release_notes": {
                    "title": "Release Notes",
                    "description": "The release notes configuration.",
                    "examples": [
                        {
                            "parsers": {
                                "1": {
                                    "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                    "title": "Critical Changes"
                                },
                                "2": {
                                    "class_path": "cumulusci.tasks.release_notes.parser.GithubLinesParser",
                                    "title": "Changes"
                                }
                            }
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/ReleaseNotes"
                        }
                    ]
                },
                "2gp_context": {
                    "title": "2GP Context",
                    "description": "The GitHub Commit Status name to use for 2GP feature packages.",
                    "examples": [
                        "Build Feature Test Package",
                        "Nonstandard Package Status"
                    ],
                    "type": "string"
                },
                "unlocked_context": {
                    "title": "Unlocked Context",
                    "description": "The GitHub Commit Status name to use for unlocked packages.",
                    "examples": ["Build Unlocked Package", "Nonstandard Package Status"],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "ResolutionStrategiesEnum": {
            "title": "ResolutionStrategiesEnum",
            "description": "The allowed values for the resolution_strategy field of a dependency resolution",
            "enum": ["latest_release", "include_beta", "commit_status", "unlocked"],
            "type": "string"
        },
        "DependencyResolutions": {
            "title": "Dependency Resolutions",
            "type": "object",
            "properties": {
                "production": {
                    "title": "Production Resolution",
                    "description": "The resolution strategy to use for production orgs including packaging orgs and promotable package versions.",
                    "examples": ["latest_release"],
                    "anyOf": [
                        {
                            "$ref": "#/definitions/ResolutionStrategiesEnum"
                        },
                        {
                            "type": "string"
                        }
                    ]
                },
                "preproduction": {
                    "title": "Preproduction Resolution",
                    "description": "The resolution strategy to use for preproduction orgs including scratch orgs.",
                    "examples": ["include_beta", "commit_status", "my_custom_strategy"],
                    "type": "string"
                },
                "resolution_strategies": {
                    "title": "Resolution Strategies",
                    "description": "A dictionary of resolution strategies made up of a list of resolvers run in order until resolution is found.",
                    "examples": [
                        {
                            "latest_release": ["tag", "latest_release", "unmanaged"],
                            "include_beta": [
                                "tag",
                                "latest_beta",
                                "latest_release",
                                "unmanaged"
                            ]
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "additionalProperties": false
        },
        "Project": {
            "title": "Project Configuration",
            "type": "object",
            "properties": {
                "name": {
                    "title": "Project Name",
                    "description": "The name of the project. This should generally match the git repo name. This name is used as the project name in CumulusCI's keychain for storing files under ~/.cumulusci.",
                    "examples": ["NPSP", "My-Repo"],
                    "type": "string"
                },
                "package": {
                    "title": "Package Config",
                    "description": "The package info for the project.",
                    "examples": [
                        {
                            "name": "Nonprofit Success Pack",
                            "namespace": "npsp",
                            "api_version": "59.0"
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/Package"
                        }
                    ]
                },
                "test": {
                    "title": "Apex Testing Config",
                    "description": "The apex test configuration for the project.",
                    "examples": [
                        {
                            "name_match": "%Test"
                        },
                        {
                            "name_match": "%_test%"
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/Test"
                        }
                    ]
                },
                "git": {
                    "title": "Git Config",
                    "description": "The git configuration for the project.",
                    "examples": [
                        {
                            "repo_url": "https://github.com/SalesforceFoundation/NPSP",
                            "default_branch": "main",
                            "prefix_feature": "feature/",
                            "prefix_beta": "beta/",
                            "prefix_release": "release/",
                            "push_prefix_sandbox": "sandbox/",
                            "push_prefix_production": "prod/"
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/Git"
                        }
                    ]
                },
                "dependencies": {
                    "title": "Dependencies",
                    "description": "A list of dependencies for the project. See https://cumulusci.readthedocs.io/en/stable/dev.html#manage-dependencies for more information.",
                    "examples": [
                        [
                            {
                                "namespace": "somens",
                                "version": "1.23"
                            },
                            {
                                "github": "https://github.com/SalesforceFoundation/NPSP"
                            }
                        ]
                    ],
                    "type": "array",
                    "items": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                },
                "dependency_resolutions": {
                    "title": "Dependency Resolutions",
                    "description": "The dependency resolution configuration for the project. See https://cumulusci.readthedocs.io/en/stable/dev.html#manage-dependencies for more information.",
                    "examples": [
                        {
                            "production": "latest_release",
                            "preproduction": "include_beta",
                            "resolution_strategies": {
                                "latest_release": ["tag", "latest_release", "unmanaged"],
                                "include_beta": [
                                    "tag",
                                    "latest_beta",
                                    "latest_release",
                                    "unmanaged"
                                ]
                            }
                        }
                    ],
                    "allOf": [
                        {
                            "$ref": "#/definitions/DependencyResolutions"
                        }
                    ]
                },
                "dependency_pins": {
                    "title": "Dependency Pins",
                    "description": "A list of dependency pins for the project. See https://cumulusci.readthedocs.io/en/stable/dev.html#manage-dependencies for more information.",
                    "examples": [
                        [
                            {
                                "github": "https://github.com/SalesforceFoundation/NPSP",
                                "tag": "rel/3.219"
                            },
                            {
                                "github": "https://github.com/SalesforceFoundation/Contacts_and_Organizations",
                                "tag": "rel/3.19"
                            }
                        ]
                    ],
                    "type": "array",
                    "items": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                },
                "source_format": {
                    "title": "Source Format",
                    "description": "The source format for the project. Either sfdx for sfdx source format under force-app/ or mdapi for Metadata API format under src/.",
                    "default": "mdapi",
                    "examples": ["sfdx", "mdapi"],
                    "enum": ["sfdx", "mdapi"],
                    "type": "string"
                },
                "custom": {
                    "title": "Custom",
                    "description": "A dictionary for custom project configuration. This is a good place to put project-specific configuration. Do not use for storing any sensitive information like credentials!",
                    "examples": [
                        {
                            "my_custom_key": "my_custom_value"
                        }
                    ],
                    "type": "object"
                }
            },
            "additionalProperties": false
        },
        "ScratchOrg": {
            "title": "Scratch Org Configuration",
            "type": "object",
            "properties": {
                "config_file": {
                    "title": "Config File",
                    "description": "The path to the scratchdef config file.",
                    "examples": [
                        "orgs/dev.json",
                        "orgs/managed.json",
                        "config/project-scratch-def.json"
                    ],
                    "type": "string",
                    "format": "path"
                },
                "days": {
                    "title": "Days",
                    "description": "The number of days the scratch org should last.",
                    "min": 1,
                    "max": 30,
                    "examples": [1, 7, 30],
                    "type": "integer"
                },
                "namespaced": {
                    "title": "Namespaced",
                    "description": "If true, the scratch org should be created with the project's namespace. If false, the scratch org should be created without a namespace.",
                    "examples": [true, false],
                    "type": "boolean"
                },
                "setup_flow": {
                    "title": "Setup Flow",
                    "description": "The name of the flow to run after the scratch org is created.",
                    "examples": ["dev_org", "qa_org_2gp"],
                    "type": "string"
                },
                "noancestors": {
                    "title": "No Ancestors",
                    "description": "If True, the scratch org should be created without ancestors.",
                    "examples": [true, false],
                    "type": "boolean"
                },
                "release": {
                    "title": "Release",
                    "description": "The Salesforce release to use for the scratch org.",
                    "examples": ["preview", "previous"],
                    "enum": ["preview", "previous"],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "Orgs": {
            "title": "Orgs Configuration",
            "type": "object",
            "properties": {
                "scratch": {
                    "title": "Scratch Org Configs",
                    "description": "A dictionary of scratch org configurations for the project.",
                    "examples": [
                        {
                            "dev": {
                                "config_file": "orgs/dev.json",
                                "days": 1,
                                "namespaced": true,
                                "setup_flow": "dev_org",
                                "noancestors": true,
                                "release": "preview"
                            },
                            "qa": {
                                "config_file": "orgs/qa.json",
                                "days": 7,
                                "namespaced": true,
                                "setup_flow": "qa_org",
                                "noancestors": true,
                                "release": "previous"
                            }
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/ScratchOrg"
                    }
                }
            },
            "additionalProperties": false
        },
        "ServiceAttribute": {
            "title": "Service Attribute Definition",
            "type": "object",
            "properties": {
                "description": {
                    "title": "Description",
                    "description": "A description of the attribute.",
                    "examples": ["The username for the service."],
                    "type": "string"
                },
                "required": {
                    "title": "Required",
                    "description": "If True, the attribute is required.",
                    "examples": [true, false],
                    "type": "boolean"
                },
                "default_factory": {
                    "title": "Default Factory",
                    "description": "The Python class path to a callable that returns the default value for the attribute.",
                    "examples": ["cumulusci.core.config.OrgConfig.default_username"],
                    "type": "string"
                },
                "default": {
                    "title": "Default",
                    "description": "The default value for the attribute.",
                    "examples": ["my_default_username"],
                    "type": "string"
                },
                "sensitive": {
                    "title": "Sensitive",
                    "description": "If True, the attribute is sensitive and should not be logged.",
                    "default": false,
                    "examples": [true, false],
                    "type": "boolean"
                }
            },
            "additionalProperties": false
        },
        "Service": {
            "title": "Service Definition",
            "type": "object",
            "properties": {
                "description": {
                    "title": "Description",
                    "description": "A description of the service.",
                    "examples": [
                        "Create a connection to GitHub to interact with the API."
                    ],
                    "type": "string"
                },
                "class_path": {
                    "title": "Class Path",
                    "description": "The Python class path to the service class. Typically not used for most services that just need simple key/value configuration.",
                    "examples": [
                        "cumulusci.core.config.marketing_cloud_service_config.MarketingCloudServiceConfig"
                    ],
                    "type": "string"
                },
                "attributes": {
                    "title": "Attributes",
                    "description": "A dictionary of attributes for the service.",
                    "examples": [
                        {
                            "username": {
                                "description": "The username for the service.",
                                "required": true,
                                "default_factory": "cumulusci.core.config.OrgConfig.default_username"
                            },
                            "password": {
                                "description": "The password for the service.",
                                "required": true,
                                "sensitive": true
                            }
                        },
                        {
                            "base_url": {
                                "description": "The base URL for the service.",
                                "required": true,
                                "default": "https://my-service.com"
                            },
                            "api_token": {
                                "description": "The API token for the service.",
                                "required": true,
                                "sensitive": true
                            }
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/ServiceAttribute"
                    }
                },
                "validator": {
                    "title": "Validator",
                    "description": "The Python class path to a callable that validates the service configuration.",
                    "examples": ["cumulusci.core.github.validate_service"],
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "CumulusCIConfig": {
            "title": "CumulusCI Configuration",
            "type": "object",
            "properties": {
                "keychain": {
                    "title": "Keychain Class Path",
                    "description": "The Python class path to the keychain class to override CumulusCI's keychain.",
                    "examples": [
                        "cumulusci.core.keychain.EnvironmentProjectKeychain",
                        "mypypackage.keychain.MyCumulusCIKeychain"
                    ],
                    "type": "string"
                }
            },
            "required": ["keychain"],
            "additionalProperties": false
        },
        "Plan": {
            "title": "Plan Definition",
            "type": "object",
            "properties": {
                "title": {
                    "title": "Plan Title",
                    "description": "The title of the plan, shown in MetaDeploy.",
                    "examples": ["Base Install", "Full Demo Install"],
                    "type": "string"
                },
                "description": {
                    "title": "Description",
                    "description": "A description of the plan.",
                    "examples": [
                        "A base install of the packages only",
                        "A full demo install of the packages with configuration and sample data"
                    ],
                    "type": "string"
                },
                "tier": {
                    "title": "Tier",
                    "description": "The tier of the plan. Primary plans are shown first in MetaDeploy. Secondary plans are shown second. Additional plans are shown last. Only one primary plan and one secondary plan can be set per project. You can set multiple additional plans.",
                    "default": "primary",
                    "examples": ["primary", "secondary", "additional"],
                    "enum": ["primary", "secondary", "additional"],
                    "type": "string"
                },
                "slug": {
                    "title": "Slug",
                    "description": "The slug of the plan, used in the plan URL.",
                    "examples": ["base-install", "full-demo-install"],
                    "type": "string"
                },
                "is_listed": {
                    "title": "Is Listed",
                    "description": "If True, the plan is listed in MetaDeploy. If False, the plan is hidden.",
                    "default": true,
                    "type": "boolean"
                },
                "steps": {
                    "title": "Steps",
                    "description": "The steps in the plan. Steps are entered in numbered slots using the key. Slot numbers are parsed with Python's LooseVersion to allow for injecting steps between other steps using the format 1.1.2.",
                    "examples": [
                        {
                            "1": {
                                "task": "update_dependencies"
                            },
                            "2": {
                                "task": "install_prod"
                            }
                        },
                        {
                            "1": {
                                "task": "update_dependencies"
                            },
                            "2": {
                                "task": "install_prod"
                            },
                            "3": {
                                "flow": "config_common"
                            },
                            "4": {
                                "flow": "config_demo"
                            },
                            "5": {
                                "flow": "demo_data"
                            }
                        },
                        {
                            "1": {
                                "flow": "customer_org"
                            }
                        },
                        {
                            "1": {
                                "task": "customer_org_full"
                            }
                        }
                    ],
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/Step"
                    }
                },
                "checks": {
                    "title": "Preflight Checks",
                    "description": "A list of preflight checks to run before the plan.",
                    "default": [],
                    "examples": [
                        [
                            {
                                "when": "org.scratch == True",
                                "action": "error",
                                "message": "The org must be a scratch org."
                            },
                            {
                                "when": "'npsp' not in tasks.get_installed_packages()",
                                "action": "error",
                                "message": "NPSP must be installed in your org."
                            }
                        ]
                    ],
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/PreflightCheck"
                    }
                },
                "error_message": {
                    "title": "Error Message",
                    "description": "The error message to display if the preflight check is triggered.",
                    "examples": ["The org must be a scratch org."],
                    "type": "string"
                },
                "post_install_message": {
                    "title": "Post-install Message",
                    "description": "The message to display after the plan is installed.",
                    "examples": ["The plan has been installed."],
                    "type": "string"
                },
                "preflight_message": {
                    "title": "Preflight Message",
                    "description": "The message to display before the plan is installed.",
                    "examples": [
                        "The plan is about to be installed. We're running some checks on your org first."
                    ],
                    "type": "string"
                },
                "allowed_org_providers": {
                    "title": "Allowed Org Providers",
                    "description": "The org providers that are allowed for the plan. The user provider allows connections to existing orgs using OAuth. The devhub provider uses MetaDeploy's configured DevHub to create scratch orgs.",
                    "default": ["user"],
                    "examples": [["devhub"], ["user"], ["devhub", "user"]],
                    "type": "array",
                    "items": {
                        "enum": ["devhub", "user"],
                        "type": "string"
                    }
                }
            },
            "additionalProperties": false
        },
        "LocalFolderSourceModel": {
            "title": "Local Folder Source Definition",
            "type": "object",
            "properties": {
                "path": {
                    "title": "Folder Path",
                    "description": "The path to the folder.",
                    "examples": ["modules"],
                    "format": "directory-path",
                    "type": "string"
                },
                "allow_remote_code": {
                    "title": "Allow Remote Code",
                    "description": "If True, allow remote code execution for the source. This is a security risk and should only be used for trusted sources.",
                    "default": false,
                    "examples": [true, false],
                    "type": "boolean"
                }
            },
            "required": ["path"],
            "additionalProperties": false
        },
        "GitHubSourceRelease": {
            "title": "GitHubSourceRelease",
            "description": "An enumeration.",
            "enum": ["latest", "previous", "latest_beta"],
            "type": "string"
        },
        "GitHubSourceModel": {
            "title": "GitHub Source Definition",
            "type": "object",
            "properties": {
                "github": {
                    "title": "GitHub URL",
                    "description": "The GitHub URL for the repository.",
                    "examples": ["https://github.com/SalesforceFoundation/NPSP"],
                    "type": "string"
                },
                "resolution_strategy": {
                    "title": "Resolution Strategy",
                    "description": "The resolution strategy to use for the GitHub source.",
                    "examples": [
                        "latest_release",
                        "include_beta",
                        "commit_status",
                        "unlocked"
                    ],
                    "type": "string"
                },
                "commit": {
                    "title": "Commit",
                    "description": "The commit to use for the GitHub source.",
                    "examples": ["abc123"],
                    "type": "string"
                },
                "ref": {
                    "title": "Ref",
                    "description": "The ref to use for the GitHub source.",
                    "examples": ["main"],
                    "type": "string"
                },
                "branch": {
                    "title": "Branch",
                    "description": "The branch to use for the GitHub source.",
                    "examples": ["main"],
                    "type": "string"
                },
                "tag": {
                    "title": "Tag",
                    "description": "The tag to use for the GitHub source.",
                    "examples": ["v1.0"],
                    "type": "string"
                },
                "release": {
                    "title": "Release",
                    "description": "The release to use for the GitHub source.",
                    "examples": ["latest", "previous", "latest_beta"],
                    "allOf": [
                        {
                            "$ref": "#/definitions/GitHubSourceRelease"
                        }
                    ]
                },
                "description": {
                    "title": "Description",
                    "description": "A description of the source.",
                    "examples": ["The GitHub source for the Nonprofit Success Pack."],
                    "type": "string"
                },
                "allow_remote_code": {
                    "title": "Allow Remote Code",
                    "description": "If True, allow remote code execution for the source. This is a security risk and should only be used for trusted sources.",
                    "default": false,
                    "examples": [true, false],
                    "type": "boolean"
                }
            },
            "required": ["github"],
            "additionalProperties": false
        },
        "CumulusCLIConfig": {
            "title": "CumulusCI CLI Configuration",
            "type": "object",
            "properties": {
                "show_stacktraces": {
                    "title": "Show Stacktraces",
                    "description": "If True, show stacktraces for exceptions.",
                    "default": false,
                    "examples": [true, false],
                    "type": "boolean"
                },
                "plain_output": {
                    "title": "Plain Output",
                    "description": "If True, use plain output instead of rich output.",
                    "examples": [true, false],
                    "type": "boolean"
                }
            },
            "additionalProperties": false
        }
    }
}
